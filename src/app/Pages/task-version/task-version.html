<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    min-height: 100vh;
  }
</style>
<body class="bg-dark text-light d-flex flex-column">
<div class="container my-4 flex-grow-1 d-flex flex-column justify-content-center"> 
  <div class="p-4 bg-dark text-light rounded-3 shadow-lg"> 
    <h1 class="text-center mb-4 text-light">{{taskName}}</h1>
    <h1 class="text-end" routerLink="/task"> Geri dön  </h1>
    <div class="mb-3">
      <input  [(ngModel)]="searchText" type="text" class="form-control bg-light text-dark rounded-2"  placeholder="Versiyonlarımda ara" >
    </div>
    <div class="text-center mb-3 text-danger" *ngIf="filteredItems().length === 0">
      <p class="text-danger">Bu isimde versiyon bulunmuyor</p>
    </div>
    <div class="text-decoration-none wd-2 py-3" *ngFor="let version of filteredItems()">
      <div class="card bg-secondary text-white rounded-2 border border-secondary">
        <div class="card-body d-flex justify-content-between align-items-center" (click)="openDocuments(version.id,taskId); $event.stopPropagation()">
          <h6>Versiyon:  V{{version.versionNumber}}</h6>
          <small class="text-white-50">Oluşturulma tarihi {{version.time | date:'medium'}} </small>
          <small class="text-white-50"> Durum: {{ version.status || 'Bilinmiyor'}} </small>
          <div>
        </div>
        <div>
        </div>
      </div>
      <small><select [(ngModel)]="version.status" (change)="ChangeStatusByTaskId(version.id, version.status)" aria-label="Aktif/Deaktif" class="btn btn-primary shadow-sm me-4 py-3">
        <option value=""> Durum seçin</option>
        <option value="aktif">Aktif</option>
        <option value="deaktif">Deaktif</option>
      </select>
    </small>
      </div>
    </div>
    <div class="text-end py-3">
      <button class="btn btn-danger shadow-sm me-2 py-3" (click)="confirmDelete(taskId); $event.stopPropagation()">
        Son versiyonu sil
      </button>
      <select [(ngModel)]="selectedStatus" aria-label="Aktif/Deaktif" class="btn btn-primary shadow-sm me-4 py-3">
        <option value=""> Durum seçin</option>
        <option value="aktif">Aktif</option>
        <option value="deaktif">Deaktif</option>
      </select>
      <button    class="btn btn-primary shadow-sm py-3" (click)="GetNewVersion(taskId,+lastUpdater,selectedStatus)">Yeni versiyona geç</button>
    </div>
  </div>
</div>
</body>